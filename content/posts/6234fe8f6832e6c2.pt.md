---
title: Typescript #01 - Nested key type
date: 2025-11-01
draft: true
tags:
  - typescript
  - react
  - nested
  - dynamic
---

```typescript
import { ReactComponent as RoomKeyIcon } from './room_key.svg';
...
import { ReactComponent as OpenFolderIcon } from './open_folder.svg';

export const Hotels = {
  RoomKeyIcon,
  ...
};

export const Folder = {
  OpenFolderIcon,
  ...
};
```

```typescript
import { Folders } from './svg/folders';
import { Hotels } from './svg/hotels';

export const DefaultIcons = {
  Folders,
  Hotels
};
```

```typescript
import { type SVGProps } from 'react';
import { type DefaultIcons } from 'icons/default';

/**
 * Tipa corretamente um objeto nesteado fornecendo o intellisense esperado
 *
 * @param {Object} T : Objeto em quest√£o (DefaultDSIcons).
 */

export type NestedKeysType<T, S extends string> = T extends object
  ? S extends `${infer K1}.${infer K2}`
    ? K1 extends keyof T
      ? T[K1] extends object
        ? `${K1}.${NestedKeysType<T[K1], K2>}`
        : keyof T & string
      : keyof T & string
    : S extends keyof T
      ? `${S}`
      : keyof T & string
  : '';

export interface IDefaultIconsProps<S extends string>
  extends SVGProps<SVGSVGElement> {
  name: NestedKeysType<typeof DefaultIcons, S>;
  skeletonClassName?: string;
}
```

```typescript
import { type FC, Suspense, type SVGProps } from 'react';

import { SkeletonLoader } from 'components/SkeletonLoader/SkeletonLoader.component';

import { DefaultIcons as Icons } from '../../icons/default';

import {
  type IDefaultDSIconsProps,
  type NestedKeysType
} from './DefaultDSIcons.types';

export function DefaultIcons<T extends string>({
  name,
  ...rest
}: IDefaultIconsProps<T>): JSX.Element {
  // Retorna o valor do objeto com a chave nesteada Folder.Icon
  function getDefaultIcon(
    path: NestedKeysType<typeof DSIcons, T>
  ): FC<SVGProps<SVGSVGElement>> {
    const properties = Array.isArray(path) ? path : path.split('.');
    return properties.reduce((prev, curr) => prev?.[curr], DSIcons);
  }

  const Icon = getDefaultIcon(name);

  return (
    <Suspense
      fallback={
        <SkeletonLoader />
      }
    >
      <Icon {...rest} />
    </Suspense>
  );
}
```
